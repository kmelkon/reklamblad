<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veckans Recept | Handla Smart</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,500;0,9..144,700;1,9..144,400&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    <script>(function(){try{var t=localStorage.getItem('theme');if(t)document.documentElement.setAttribute('data-theme',t)}catch(e){}})();</script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo-group">
                <div class="logo-icon">
                    <svg viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 20C12 20 16 14 20 14C24 14 28 20 28 20C28 20 24 26 20 26C16 26 12 20 12 20Z" stroke="currentColor" stroke-width="2"/>
                        <circle cx="20" cy="20" r="3" fill="currentColor"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>Veckans Recept</h1>
                    <p class="tagline">Laga mat med veckans erbjudanden</p>
                </div>
            </div>
            <nav class="nav-tabs" id="navTabs" aria-label="Huvudnavigering">
                <a href="#/recipes" class="nav-tab active" data-route="/recipes">
                    <span class="nav-tab-text">Recept</span>
                    <span class="nav-tab-indicator"></span>
                </a>
                <a href="#/deals" class="nav-tab" data-route="/deals">
                    <span class="nav-tab-text">Erbjudanden</span>
                    <span class="nav-tab-indicator"></span>
                </a>
                <a href="#/lists" class="nav-tab" data-route="/lists">
                    <span class="nav-tab-text">Inköpslistor</span>
                    <span class="nav-tab-indicator"></span>
                </a>
            </nav>
            <div class="meta-info">
                <div class="update-badge" id="lastUpdated">
                    <span class="update-dot"></span>
                    <span class="update-text">Laddar...</span>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Växla tema">
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- Recipes Page -->
        <div class="page" id="pageRecipes" data-page="/recipes">
            <section class="controls">
                <div class="search-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Sök recept...">
                </div>

                <div class="filter-group" id="filterGroup">
                    <!-- Dynamically generated -->
                </div>

                <select id="sortSelect" class="sort-select">
                    <option value="match">Bäst matchning</option>
                    <option value="rating">Högst betyg</option>
                    <option value="time">Snabbast</option>
                </select>
            </section>

            <section class="category-pills" id="categoryPills"></section>

            <section class="stats-bar" id="statsBar">
                <div class="stat">
                    <span class="stat-number" id="recipeCount">—</span>
                    <span class="stat-label">recept</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat">
                    <span class="stat-number" id="dealCount">—</span>
                    <span class="stat-label">erbjudanden</span>
                </div>
            </section>

            <section class="recipe-grid" id="recipeGrid">
                <div class="loading-state">
                    <div class="loading-spinner"></div>
                    <p>Laddar recept...</p>
                </div>
            </section>
        </div>

        <!-- Deals Page -->
        <div class="page" id="pageDeals" data-page="/deals" style="display: none;">
            <section class="deals-header">
                <div class="deals-title-row">
                    <h2 class="deals-title">Veckans Erbjudanden</h2>
                    <span class="deals-count"><span id="dealsCount">—</span> erbjudanden</span>
                </div>
                <div class="deals-controls">
                    <div class="search-wrapper">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" id="dealsSearchInput" class="search-input" placeholder="Sök erbjudanden...">
                    </div>
                </div>
                <div class="filter-chips" id="dealsFilterGroup">
                    <!-- Dynamically generated -->
                </div>
            </section>

            <section class="deals-container" id="dealsContainer">
                <div class="loading-state">
                    <div class="loading-spinner"></div>
                    <p>Laddar erbjudanden...</p>
                </div>
            </section>

        </div>

        <!-- Lists Page -->
        <div class="page" id="pageLists" data-page="/lists" style="display: none;">
            <div class="page-placeholder">
                <div class="placeholder-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                        <rect x="9" y="2" width="6" height="4" rx="1"/>
                        <path d="M9 12l2 2 4-4"/>
                    </svg>
                </div>
                <h2 class="placeholder-title">Inköpslistor</h2>
                <p class="placeholder-text">Kommer snart</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>Data hämtas från <strong>ICA</strong>, <strong>Coop</strong> och <strong>Willys</strong> reklamblad</p>
    </footer>

    <!-- Deals Selection Bar (fixed position, outside page containers) -->
    <div class="selection-bar" id="selectionBar">
        <span class="selection-info"><span id="selectionCount">0</span> valda</span>
        <button class="selection-btn primary" id="addToListBtn" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
            </svg>
            Lägg till i lista
        </button>
        <button class="selection-btn" id="clearSelectionBtn">Avmarkera</button>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav" id="mobileNav" aria-label="Mobilnavigering">
        <a href="#/recipes" class="mobile-nav-item active" data-route="/recipes">
            <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M12 6.5c-2 0-3.5 1.5-4 3.5-.5-1-1.5-2-3-2-1 0-2 .5-2 2 0 2.5 4 6 9 10 5-4 9-7.5 9-10 0-1.5-1-2-2-2-1.5 0-2.5 1-3 2-.5-2-2-3.5-4-3.5z"/>
                <path d="M8 3h8M9 3v2M15 3v2"/>
            </svg>
            <span class="mobile-nav-label">Recept</span>
        </a>
        <a href="#/deals" class="mobile-nav-item" data-route="/deals">
            <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/>
                <circle cx="7" cy="7" r="1.5"/>
            </svg>
            <span class="mobile-nav-label">Erbjudanden</span>
        </a>
        <a href="#/lists" class="mobile-nav-item" data-route="/lists">
            <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                <rect x="9" y="2" width="6" height="4" rx="1"/>
                <path d="M9 12l2 2 4-4"/>
            </svg>
            <span class="mobile-nav-label">Listor</span>
        </a>
    </nav>

    <script src="router.js"></script>
    <script src="deals.js"></script>
    <script src="app.js"></script>
</body>
</html>
